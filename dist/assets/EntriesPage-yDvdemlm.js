import{a as j,g as w,r as u,u as P,j as i,s as S,d as x,n as l,e as M,m as G,o as R,c as pt,B as W,p as dt,L as ut,i as V,l as gt,h as ft,R as _,k as Ct,A as vt}from"./index-C1gt5eUJ.js";import{g as yt}from"./index-DcjQsvXZ.js";import{i as bt,c as xt,u as K,P as $t,B as mt,E as ht}from"./errors-DNfEzAA6.js";function St(t){return j("MuiTypography",t)}w("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const kt={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},It=bt(),Rt=t=>{const{align:o,gutterBottom:a,noWrap:e,paragraph:n,variant:c,classes:d}=t,s={root:["root",c,t.align!=="inherit"&&`align${l(o)}`,a&&"gutterBottom",e&&"noWrap",n&&"paragraph"]};return M(s,St,d)},jt=S("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,a.variant&&o[a.variant],a.align!=="inherit"&&o[`align${l(a.align)}`],a.noWrap&&o.noWrap,a.gutterBottom&&o.gutterBottom,a.paragraph&&o.paragraph]}})(G(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([o,a])=>o!=="inherit"&&a&&typeof a=="object").map(([o,a])=>({props:{variant:o},style:a})),...Object.entries(t.palette).filter(R()).map(([o])=>({props:{color:o},style:{color:(t.vars||t).palette[o].main}})),...Object.entries(t.palette?.text||{}).filter(([,o])=>typeof o=="string").map(([o])=>({props:{color:`text${l(o)}`},style:{color:(t.vars||t).palette.text[o]}})),{props:({ownerState:o})=>o.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:o})=>o.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:o})=>o.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:o})=>o.paragraph,style:{marginBottom:16}}]}))),H={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},m=u.forwardRef(function(o,a){const{color:e,...n}=P({props:o,name:"MuiTypography"}),c=!kt[e],d=It({...n,...c&&{color:e}}),{align:s="inherit",className:p,component:g,gutterBottom:v=!1,noWrap:y=!1,paragraph:E=!1,variant:h="body1",variantMapping:C=H,...k}=d,I={...d,align:s,color:e,className:p,component:g,gutterBottom:v,noWrap:y,paragraph:E,variant:h,variantMapping:C},T=g||(E?"p":C[h]||H[h])||"span",z=Rt(I);return i.jsx(jt,{as:T,ref:a,className:x(z.root,p),...k,ownerState:I,style:{...s!=="inherit"&&{"--Typography-textAlign":s},...k.style}})}),wt=xt(i.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function Pt(t){return j("MuiChip",t)}const r=w("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Mt=t=>{const{classes:o,disabled:a,size:e,color:n,iconColor:c,onDelete:d,clickable:s,variant:p}=t,g={root:["root",p,a&&"disabled",`size${l(e)}`,`color${l(n)}`,s&&"clickable",s&&`clickableColor${l(n)}`,d&&"deletable",d&&`deletableColor${l(n)}`,`${p}${l(n)}`],label:["label",`label${l(e)}`],avatar:["avatar",`avatar${l(e)}`,`avatarColor${l(n)}`],icon:["icon",`icon${l(e)}`,`iconColor${l(c)}`],deleteIcon:["deleteIcon",`deleteIcon${l(e)}`,`deleteIconColor${l(n)}`,`deleteIcon${l(p)}Color${l(n)}`]};return M(g,Pt,o)},Et=S("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t,{color:e,iconColor:n,clickable:c,onDelete:d,size:s,variant:p}=a;return[{[`& .${r.avatar}`]:o.avatar},{[`& .${r.avatar}`]:o[`avatar${l(s)}`]},{[`& .${r.avatar}`]:o[`avatarColor${l(e)}`]},{[`& .${r.icon}`]:o.icon},{[`& .${r.icon}`]:o[`icon${l(s)}`]},{[`& .${r.icon}`]:o[`iconColor${l(n)}`]},{[`& .${r.deleteIcon}`]:o.deleteIcon},{[`& .${r.deleteIcon}`]:o[`deleteIcon${l(s)}`]},{[`& .${r.deleteIcon}`]:o[`deleteIconColor${l(e)}`]},{[`& .${r.deleteIcon}`]:o[`deleteIcon${l(p)}Color${l(e)}`]},o.root,o[`size${l(s)}`],o[`color${l(e)}`],c&&o.clickable,c&&e!=="default"&&o[`clickableColor${l(e)})`],d&&o.deletable,d&&e!=="default"&&o[`deletableColor${l(e)}`],o[p],o[`${p}${l(e)}`]]}})(G(({theme:t})=>{const o=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${r.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${r.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:o,fontSize:t.typography.pxToRem(12)},[`& .${r.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${r.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${r.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${r.icon}`]:{marginLeft:5,marginRight:-6},[`& .${r.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.alpha((t.vars||t).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.alpha((t.vars||t).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${r.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${r.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(R(["contrastText"])).map(([a])=>({props:{color:a},style:{backgroundColor:(t.vars||t).palette[a].main,color:(t.vars||t).palette[a].contrastText,[`& .${r.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[a].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[a].contrastText}}}})),{props:a=>a.iconColor===a.color,style:{[`& .${r.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:o}}},{props:a=>a.iconColor===a.color&&a.color!=="default",style:{[`& .${r.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${r.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}}},...Object.entries(t.palette).filter(R(["dark"])).map(([a])=>({props:{color:a,onDelete:!0},style:{[`&.${r.focusVisible}`]:{background:(t.vars||t).palette[a].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)},[`&.${r.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(R(["dark"])).map(([a])=>({props:{color:a,clickable:!0},style:{[`&:hover, &.${r.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${r.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${r.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${r.avatar}`]:{marginLeft:4},[`& .${r.avatarSmall}`]:{marginLeft:2},[`& .${r.icon}`]:{marginLeft:4},[`& .${r.iconSmall}`]:{marginLeft:2},[`& .${r.deleteIcon}`]:{marginRight:5},[`& .${r.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(R()).map(([a])=>({props:{variant:"outlined",color:a},style:{color:(t.vars||t).palette[a].main,border:`1px solid ${t.alpha((t.vars||t).palette[a].main,.7)}`,[`&.${r.clickable}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.hoverOpacity)},[`&.${r.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.focusOpacity)},[`& .${r.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[a].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[a].main}}}}))]}})),Tt=S("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,o)=>{const{ownerState:a}=t,{size:e}=a;return[o.label,o[`label${l(e)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function J(t){return t.key==="Backspace"||t.key==="Delete"}const zt=u.forwardRef(function(o,a){const e=P({props:o,name:"MuiChip"}),{avatar:n,className:c,clickable:d,color:s="default",component:p,deleteIcon:g,disabled:v=!1,icon:y,label:E,onClick:h,onDelete:C,onKeyDown:k,onKeyUp:I,size:T="medium",variant:z="filled",tabIndex:Q,skipFocusWhenDisabled:X=!1,slots:Y={},slotProps:Z={},...tt}=e,ot=u.useRef(null),at=pt(ot,a),B=f=>{f.stopPropagation(),C&&C(f)},et=f=>{f.currentTarget===f.target&&J(f)&&f.preventDefault(),k&&k(f)},rt=f=>{f.currentTarget===f.target&&C&&J(f)&&C(f),I&&I(f)},L=d!==!1&&h?!0:d,D=L||C?W:p||"div",A={...e,component:D,disabled:v,size:T,color:s,iconColor:u.isValidElement(y)&&y.props.color||s,onDelete:!!C,clickable:L,variant:z},$=Mt(A),nt=D===W?{component:p||"div",focusVisibleClassName:$.focusVisible,...C&&{disableRipple:!0}}:{};let F=null;C&&(F=g&&u.isValidElement(g)?u.cloneElement(g,{className:x(g.props.className,$.deleteIcon),onClick:B}):i.jsx(wt,{className:$.deleteIcon,onClick:B}));let N=null;n&&u.isValidElement(n)&&(N=u.cloneElement(n,{className:x($.avatar,n.props.className)}));let O=null;y&&u.isValidElement(y)&&(O=u.cloneElement(y,{className:x($.icon,y.props.className)}));const U={slots:Y,slotProps:Z},[lt,st]=K("root",{elementType:Et,externalForwardedProps:{...U,...tt},ownerState:A,shouldForwardComponentProp:!0,ref:at,className:x($.root,c),additionalProps:{disabled:L&&v?!0:void 0,tabIndex:X&&v?-1:Q,...nt},getSlotProps:f=>({...f,onClick:b=>{f.onClick?.(b),h?.(b)},onKeyDown:b=>{f.onKeyDown?.(b),et(b)},onKeyUp:b=>{f.onKeyUp?.(b),rt(b)}})}),[it,ct]=K("label",{elementType:Tt,externalForwardedProps:U,ownerState:A,className:$.label});return i.jsxs(lt,{as:D,...st,children:[N||O,i.jsx(it,{...ct,children:E}),F]})});function Lt(t){return j("MuiCard",t)}w("MuiCard",["root"]);const Dt=t=>{const{classes:o}=t;return M({root:["root"]},Lt,o)},At=S($t,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Bt=u.forwardRef(function(o,a){const e=P({props:o,name:"MuiCard"}),{className:n,raised:c=!1,...d}=e,s={...e,raised:c},p=Dt(s);return i.jsx(At,{className:x(p.root,n),elevation:c?8:void 0,ref:a,ownerState:s,...d})});function Ft(t){return j("MuiCardActions",t)}w("MuiCardActions",["root","spacing"]);const Nt=t=>{const{classes:o,disableSpacing:a}=t;return M({root:["root",!a&&"spacing"]},Ft,o)},Ot=S("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,!a.disableSpacing&&o.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Ut=u.forwardRef(function(o,a){const e=P({props:o,name:"MuiCardActions"}),{disableSpacing:n=!1,className:c,...d}=e,s={...e,disableSpacing:n},p=Nt(s);return i.jsx(Ot,{className:x(p.root,c),ownerState:s,ref:a,...d})});function Wt(t){return j("MuiCardContent",t)}w("MuiCardContent",["root"]);const Vt=t=>{const{classes:o}=t;return M({root:["root"]},Wt,o)},_t=S("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),Kt=u.forwardRef(function(o,a){const e=P({props:o,name:"MuiCardContent"}),{className:n,component:c="div",...d}=e,s={...e,component:c},p=Vt(s);return i.jsx(_t,{as:c,className:x(p.root,n),ownerState:s,ref:a,...d})}),Ht={"not processed":{bg:"#FFF3E0",text:"#FB8C00"},processed:{bg:"#FFF3E0",text:"#43A047"},rejected:{bg:"#FFF3E0",text:"#E53935"}},Jt={"not processed":"Не обработана",processed:"Обработана",rejected:"Отклонена"},qt=({entries:t,userID:o})=>{const[a,e]=u.useState(null);return u.useEffect(()=>{if(o==null){e(!1);return}dt(o).then(n=>e(n.is_admin)).catch(()=>e(!1))},[o]),a===null?i.jsx(ut,{}):!t||t.length===0?i.jsx(m,{align:"center",sx:{mt:2},children:"Заявок пока нет"}):i.jsx(mt,{display:"flex",flexWrap:"wrap",gap:3,justifyContent:"center",children:t.map(n=>{const c=Ht[n.Status]||{bg:"#E0E0E0",text:"#424242"};return i.jsxs(Bt,{sx:{minWidth:250,maxWidth:320,borderRadius:2,boxShadow:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs(Kt,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[i.jsx(m,{variant:"subtitle2",color:"text.secondary",children:"Курс"}),i.jsx(m,{variant:"h6",gutterBottom:!0,children:n.Course}),i.jsx(m,{variant:"subtitle2",color:"text.secondary",children:"Дата"}),i.jsx(m,{variant:"body1",gutterBottom:!0,children:new Date(n.Date).toLocaleDateString()}),i.jsx(m,{variant:"subtitle2",color:"text.secondary",children:"Метод оплаты"}),i.jsx(m,{variant:"body1",gutterBottom:!0,children:n.PaymentMethod==="card"?"Карта":"Наличные"}),i.jsx(zt,{label:Jt[n.Status],sx:{mt:2,backgroundColor:c.bg,color:c.text,fontWeight:600,borderRadius:1,height:40,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14}})]}),a&&i.jsxs(Ut,{sx:{justifyContent:"center",gap:1,width:"100%",pb:2},children:[i.jsx(V,{size:"small",variant:"contained",color:"primary",children:"Обработать"}),i.jsx(V,{size:"small",variant:"contained",color:"error",children:"Отклонить"})]})]},n.ID)})})},Gt="_entries__title_c9jd9_1",q={entries__title:Gt},Zt=()=>{const t=gt(),o=ft();u.useEffect(()=>{t||o(_.login)},[]);const[a,e]=u.useState([]),[n,c]=u.useState(""),[d,s]=u.useState(!0),p=Ct();if(!p){console.log("User not found"),o(_.login);return}return u.useEffect(()=>{yt(p.token).then(g=>{e(g),console.log("res",g),s(!1)}).catch(g=>{if(g instanceof vt){const v=ht[g.messageFromServer];c(v||"Неизвестная ошибка"),console.log(g.messageFromServer),console.log(g.time),console.log(g.status)}else console.log(g)}).finally(()=>{s(!1)})},[]),i.jsxs("div",{className:q.entries,children:[i.jsx("h1",{className:q.entries__title,children:"Заявки"}),n&&i.jsx("p",{style:{color:"red",textAlign:"center"},children:n}),i.jsx(qt,{entries:a,userID:+p.uid})]})};export{Zt as default};
