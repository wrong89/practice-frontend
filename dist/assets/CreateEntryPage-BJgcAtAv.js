import{g as b,a as N,r as p,u as P,b as A,c as U,j as t,s as O,d as M,e as q,B as G,f as W,m as H,h as T,i as z,k as X,R as D,A as Y,l as J}from"./index-av8iVJeD.js";import{c as K}from"./index-DUKKLjku.js";import{L as S,B as Q,F as $,I as k,S as w,T as Z,E as ee}from"./errors-3bkEACvd.js";import{u as te,C as F}from"./index.esm-Blx1mMy4.js";const _=b("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),R=b("MuiListItemIcon",["root","alignItemsFlexStart"]),B=b("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function se(e){return N("MuiMenuItem",e)}const x=b("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ae=(e,s)=>{const{ownerState:n}=e;return[s.root,n.dense&&s.dense,n.divider&&s.divider,!n.disableGutters&&s.gutters]},oe=e=>{const{disabled:s,dense:n,divider:o,disableGutters:g,selected:m,classes:l}=e,d=q({root:["root",n&&"dense",s&&"disabled",!g&&"gutters",o&&"divider",m&&"selected"]},se,l);return{...l,...d}},re=O(G,{shouldForwardProp:e=>W(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ae})(H(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${x.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${x.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${x.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${x.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${_.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${_.inset}`]:{marginLeft:52},[`& .${B.root}`]:{marginTop:0,marginBottom:0},[`& .${B.inset}`]:{paddingLeft:36},[`& .${R.root}`]:{minWidth:36},variants:[{props:({ownerState:s})=>!s.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:s})=>s.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:s})=>!s.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:s})=>s.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${R.root} svg`]:{fontSize:"1.25rem"}}}]}))),u=p.forwardRef(function(s,n){const o=P({props:s,name:"MuiMenuItem"}),{autoFocus:g=!1,component:m="li",dense:l=!1,divider:v=!1,disableGutters:d=!1,focusVisibleClassName:y,role:i="menuitem",tabIndex:r,className:c,...a}=o,f=p.useContext(S),j=p.useMemo(()=>({dense:l||f.dense||!1,disableGutters:d}),[f.dense,l,d]),h=p.useRef(null);A(()=>{g&&h.current&&h.current.focus()},[g]);const L={...o,dense:j.dense,divider:v,disableGutters:d},C=oe(o),V=U(h,n);let I;return o.disabled||(I=r!==void 0?r:-1),t.jsx(S.Provider,{value:j,children:t.jsx(re,{ref:V,role:i,tabIndex:I,component:m,focusVisibleClassName:M(C.focusVisible,y),className:M(C.root,c),...a,ownerState:L,classes:C})})}),ne=()=>{const{control:e,handleSubmit:s,register:n,formState:{errors:o}}=te(),g=T(),[m,l]=p.useState(""),[v,d]=p.useState(!1),y=i=>{const r=X();if(!r){console.log("User not found"),g(D.login);return}const c={...i,user_id:+r.uid};console.log("Entry data:",c),K(c,r.token).then(a=>{console.log("Created entry:",a),d(!0)}).catch(a=>{if(d(!1),a instanceof Y){const f=ee[a.messageFromServer];l(f||"Неизвестная ошибка"),console.log(a.messageFromServer),console.log(a.time),console.log(a.status)}else console.log(a)})};return t.jsxs(Q,{component:"form",onSubmit:s(y),sx:{display:"flex",flexDirection:"column",gap:3,width:400,mx:"auto",mt:4},children:[t.jsxs($,{fullWidth:!0,error:!!o.course,children:[t.jsx(k,{id:"course-label",children:"Курс"}),t.jsx(F,{name:"course",control:e,defaultValue:"",rules:{required:"Выберите курс"},render:({field:i})=>t.jsxs(w,{...i,labelId:"course-label",label:"Курс",children:[t.jsx(u,{value:"",children:t.jsx("em",{children:"Не выбрано"})}),t.jsx(u,{value:"frontend",children:"Frontend-разработка"}),t.jsx(u,{value:"backend",children:"Backend-разработка"}),t.jsx(u,{value:"design",children:"UI/UX-дизайн"})]})})]}),t.jsx(Z,{required:!0,label:"Дата",type:"date",InputLabelProps:{shrink:!0},error:!!o.date,helperText:o.date?.message||"",...n("date",{required:"Введите дату",validate:i=>{const r=new Date(i),c=new Date("2020-01-01"),a=new Date("2100-01-01");return isNaN(r.getTime())?"Некорректная дата":r<c?`Дата не может быть раньше ${c.getFullYear()} года`:r>a?"Дата не может быть далеким будущем":!0}})}),t.jsxs($,{fullWidth:!0,error:!!o.payment_method,children:[t.jsx(k,{id:"payment-label",children:"Метод оплаты"}),t.jsx(F,{name:"payment_method",control:e,defaultValue:"",rules:{required:"Выберите метод оплаты"},render:({field:i})=>t.jsxs(w,{...i,labelId:"payment-label",label:"Метод оплаты",children:[t.jsx(u,{value:"",children:t.jsx("em",{children:"Не выбрано"})}),t.jsx(u,{value:"cash",children:"Наличные"}),t.jsx(u,{value:"card",children:"Банковская карта"})]})})]}),m&&t.jsx("p",{style:{color:"red",textAlign:"center"},children:m}),v&&t.jsx("p",{style:{color:"green",textAlign:"center"},children:"Заявка успешно создана"}),t.jsx(z,{type:"submit",variant:"contained",children:"Создать запись"})]})},ie="_entry__title_140ea_1",E={entry__title:ie},pe=()=>{const e=J(),s=T();return p.useEffect(()=>{e||s(D.login)},[]),t.jsxs("div",{className:E.entry,children:[t.jsx("h1",{className:E.entry__title,children:"Создать заявку"}),t.jsx(ne,{})]})};export{pe as default};
