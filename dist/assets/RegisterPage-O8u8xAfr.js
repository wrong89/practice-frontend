import{u as m,j as r,R as d}from"./index-C2fW9vE9.js";import{u as c,B as p,T as o,a as x,r as g,A as h}from"./index.esm-DMRaHhNZ.js";const j=()=>{const{register:a,handleSubmit:i,formState:{errors:e}}=c(),n=m(),l=s=>{console.log("Form data:",s),g(s).then(t=>{console.log("User:",t),localStorage.setItem("registered_user_id",t.id.toString()),n(d.login)}).catch(t=>{t instanceof h?(console.log(t.messageFromServer),console.log(t.time),console.log(t.status)):console.log(t)})};return r.jsxs(p,{component:"form",onSubmit:i(l),sx:{display:"flex",flexDirection:"column",gap:2,width:400,mx:"auto",mt:4},children:[r.jsx(o,{required:!0,error:!!e.login,helperText:e.login?.message,...a("login",{required:"Введите логин",minLength:{value:6,message:"Минимум 6 символов"},pattern:{value:/^[A-Za-z0-9]+$/,message:"Только латинские буквы и цифры"},validate:async s=>{const t=["admin","test123","user1"];return await new Promise(u=>setTimeout(u,300)),t.includes(s.toLowerCase())?"Такой логин уже занят":!0}}),label:"Логин",variant:"outlined"}),r.jsx(o,{required:!0,error:!!e.password,helperText:e.password&&"Пароль должен быть длиннее 8 символов",...a("password",{required:!0,minLength:3}),label:"Пароль",type:"password",variant:"outlined"}),r.jsx(o,{required:!0,error:!!e.name,helperText:e.name&&"Введите имя",...a("name",{required:!0}),label:"Имя",variant:"outlined"}),r.jsx(o,{required:!0,error:!!e.surname,helperText:e.surname&&"Введите фамилию",...a("surname",{required:!0}),label:"Фамилия",variant:"outlined"}),r.jsx(o,{required:!0,error:!!e.patronymic,helperText:e.patronymic&&"Введите отчество (если есть)",...a("patronymic"),label:"Отчество",variant:"outlined"}),r.jsx(o,{required:!0,error:!!e.phone,helperText:e.phone&&"Введите корректный номер телефона",...a("phone",{required:!0,pattern:/^\d{10,12}$/}),label:"Телефон",variant:"outlined"}),r.jsx(o,{required:!0,error:!!e.email,helperText:e.email&&"Введите корректный email",...a("email",{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/}),label:"Email",variant:"outlined"}),r.jsx(x,{type:"submit",variant:"contained",children:"Зарегистрироваться"})]})},b=()=>r.jsxs(r.Fragment,{children:[r.jsx("h1",{children:"Страница регистрации"}),r.jsx(j,{})]});export{b as default};
