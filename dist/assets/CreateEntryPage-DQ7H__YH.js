import{g as v,a as N,r as m,u as P,b as U,c as A,j as t,s as O,d as I,e as q,B as G,f as W,m as H,h as E,i as z,k as X,R as T,A as Y,l as J}from"./index-C1gt5eUJ.js";import{c as K}from"./index-DcjQsvXZ.js";import{B as Q,E as Z}from"./errors-DNfEzAA6.js";import{L as M,u as ee,F as $,I as S,C as k,S as w,T as te}from"./index.esm-CypMLJO7.js";const F=v("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),_=v("MuiListItemIcon",["root","alignItemsFlexStart"]),R=v("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function se(e){return N("MuiMenuItem",e)}const g=v("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ae=(e,s)=>{const{ownerState:n}=e;return[s.root,n.dense&&s.dense,n.divider&&s.divider,!n.disableGutters&&s.gutters]},oe=e=>{const{disabled:s,dense:n,divider:r,disableGutters:u,selected:p,classes:l}=e,a=q({root:["root",n&&"dense",s&&"disabled",!u&&"gutters",r&&"divider",p&&"selected"]},se,l);return{...l,...a}},re=O(G,{shouldForwardProp:e=>W(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ae})(H(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${g.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${g.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${g.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${g.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${F.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${F.inset}`]:{marginLeft:52},[`& .${R.root}`]:{marginTop:0,marginBottom:0},[`& .${R.inset}`]:{paddingLeft:36},[`& .${_.root}`]:{minWidth:36},variants:[{props:({ownerState:s})=>!s.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:s})=>s.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:s})=>!s.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:s})=>s.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${_.root} svg`]:{fontSize:"1.25rem"}}}]}))),c=m.forwardRef(function(s,n){const r=P({props:s,name:"MuiMenuItem"}),{autoFocus:u=!1,component:p="li",dense:l=!1,divider:f=!1,disableGutters:a=!1,focusVisibleClassName:i,role:d="menuitem",tabIndex:o,className:x,...D}=r,h=m.useContext(M),C=m.useMemo(()=>({dense:l||h.dense||!1,disableGutters:a}),[h.dense,l,a]),b=m.useRef(null);U(()=>{u&&b.current&&b.current.focus()},[u]);const L={...r,dense:C.dense,divider:f,disableGutters:a},y=oe(r),V=A(b,n);let j;return r.disabled||(j=o!==void 0?o:-1),t.jsx(M.Provider,{value:C,children:t.jsx(re,{ref:V,role:d,tabIndex:j,component:p,focusVisibleClassName:I(y.focusVisible,i),className:I(y.root,x),...D,ownerState:L,classes:y})})}),ne=()=>{const{control:e,handleSubmit:s,register:n,formState:{errors:r}}=ee(),u=E(),[p,l]=m.useState(""),f=a=>{const i=X();if(!i){console.log("User not found"),u(T.login);return}const d={...a,user_id:+i.uid};console.log("Entry data:",d),K(d,i.token).then(o=>{console.log("Created entry:",o)}).catch(o=>{if(o instanceof Y){const x=Z[o.messageFromServer];l(x||"Неизвестная ошибка"),console.log(o.messageFromServer),console.log(o.time),console.log(o.status)}else console.log(o)})};return t.jsxs(Q,{component:"form",onSubmit:s(f),sx:{display:"flex",flexDirection:"column",gap:3,width:400,mx:"auto",mt:4},children:[t.jsxs($,{fullWidth:!0,error:!!r.course,children:[t.jsx(S,{id:"course-label",children:"Курс"}),t.jsx(k,{name:"course",control:e,defaultValue:"",rules:{required:"Выберите курс"},render:({field:a})=>t.jsxs(w,{...a,labelId:"course-label",label:"Курс",children:[t.jsx(c,{value:"",children:t.jsx("em",{children:"Не выбрано"})}),t.jsx(c,{value:"frontend",children:"Frontend-разработка"}),t.jsx(c,{value:"backend",children:"Backend-разработка"}),t.jsx(c,{value:"design",children:"UI/UX-дизайн"})]})})]}),t.jsx(te,{required:!0,label:"Дата",type:"date",InputLabelProps:{shrink:!0},error:!!r.date,helperText:r.date?.message||"",...n("date",{required:"Введите дату",validate:a=>{const i=new Date(a),d=new Date("2020-01-01"),o=new Date("2100-01-01");return isNaN(i.getTime())?"Некорректная дата":i<d?`Дата не может быть раньше ${d.getFullYear()} года`:i>o?"Дата не может быть далеким будущем":!0}})}),t.jsxs($,{fullWidth:!0,error:!!r.payment_method,children:[t.jsx(S,{id:"payment-label",children:"Метод оплаты"}),t.jsx(k,{name:"payment_method",control:e,defaultValue:"",rules:{required:"Выберите метод оплаты"},render:({field:a})=>t.jsxs(w,{...a,labelId:"payment-label",label:"Метод оплаты",children:[t.jsx(c,{value:"",children:t.jsx("em",{children:"Не выбрано"})}),t.jsx(c,{value:"cash",children:"Наличные"}),t.jsx(c,{value:"card",children:"Банковская карта"})]})})]}),p&&t.jsx("p",{style:{color:"red",textAlign:"center"},children:p}),t.jsx(z,{type:"submit",variant:"contained",children:"Создать запись"})]})},ie="_entry__title_140ea_1",B={entry__title:ie},pe=()=>{const e=J(),s=E();return m.useEffect(()=>{e||s(T.login)},[]),t.jsxs("div",{className:B.entry,children:[t.jsx("h1",{className:B.entry__title,children:"Создать заявку"}),t.jsx(ne,{})]})};export{pe as default};
