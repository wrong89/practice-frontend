import{h as j,r as _,j as t,i as q,F as b,R as w,A as N}from"./index-COzDNuz-.js";import{B as E,T as a,E as F}from"./errors-D1fiRCJU.js";import{u as S,C as p}from"./index.esm-B1wd5nE-.js";const T=()=>{const{register:o,handleSubmit:h,control:u,formState:{errors:l}}=S({defaultValues:{login:"",password:"",fullName:"",phone:"",email:""}}),x=j(),[m,f]=_.useState(""),v=e=>{console.log("Form data:",e);const[s,i,n]=e.fullName.split(" "),g={login:e.login,password:e.password,name:s,surname:i,patronymic:n,phone:e.phone,email:e.email};b(g).then(r=>{console.log("User:",r),x(w.login)}).catch(r=>{if(r instanceof N){const c=F[r.messageFromServer];c&&f(c),console.log(r.messageFromServer),console.log(r.time),console.log(r.status)}else console.log(r)})};return t.jsxs(E,{component:"form",onSubmit:h(v),sx:{display:"flex",flexDirection:"column",gap:2,width:400,mx:"auto",mt:4},children:[t.jsx(a,{required:!0,error:!!l.login,helperText:l.login?.message,...o("login",{required:"Введите логин",minLength:{value:6,message:"Минимум 6 символов"},pattern:{value:/^[A-Za-z0-9]+$/,message:"Только латинские буквы и цифры"}}),label:"Логин",variant:"outlined"}),t.jsx(a,{required:!0,error:!!l.password,helperText:l.password&&"Пароль должен быть длиннее 8 символов",...o("password",{required:!0,minLength:3}),label:"Пароль",type:"password",variant:"outlined"}),t.jsx(p,{name:"fullName",control:u,rules:{required:"Введите ФИО",pattern:{value:/^[А-Яа-яЁё\s]+$/,message:"Невалидное ФИО"},validate:e=>e.trim().split(/\s+/).length<2?"Введите как минимум фамилию и имя":!0},render:({field:e})=>t.jsx(a,{...e,required:!0,label:"ФИО",variant:"outlined",error:!!l.fullName,helperText:l.fullName?.message})}),t.jsx(p,{name:"phone",control:u,rules:{required:"Введите номер телефона",pattern:{value:/^8\d{10}$/,message:"Введите 11 цифр номера телефона, начиная с 8"}},render:({field:e})=>{const s=e.value||"";let i="";return s.length>0&&(i+=s[0]+"("),s.length>=2&&(i+=s.slice(1,4)),s.length>=5&&(i+=")"+s.slice(4,7)),s.length>=8&&(i+="-"+s.slice(7,9)),s.length>=10&&(i+="-"+s.slice(9,11)),t.jsx(a,{required:!0,label:"Телефон",variant:"outlined",error:!!l.phone,helperText:l.phone?.message,value:i,onChange:n=>{let r=n.target.value.replace(/\D/g,"");r.startsWith("8")||(r="8"+r),e.onChange(r.slice(0,11))}})}}),t.jsx(a,{required:!0,error:!!l.email,helperText:l.email&&"Введите корректный email",...o("email",{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/}),label:"Email",variant:"outlined"}),m&&t.jsx("p",{style:{color:"red",textAlign:"center"},children:m}),t.jsx(q,{type:"submit",variant:"contained",children:"Зарегистрироваться"})]})},y="_register__title_162s2_1",d={register__title:y},C=()=>t.jsxs("div",{className:d.register,children:[t.jsx("h1",{className:d.register__title,children:"Регистрация"}),t.jsx(T,{})]});export{C as default};
